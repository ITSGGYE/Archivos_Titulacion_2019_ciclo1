var form=$(".validation-wizard").show();$(".validation-wizard").steps({headerTag:"h6",bodyTag:"section",transitionEffect:"fade",titleTemplate:'<span class="step">#index#</span> #title#',labels:{finish:"Finalizar",next:"Siguiente",previous:"Anterior",loading:"Cargando..."},onStepChanging:function(e,a,r){if(2==r){var i=$("#method_pay").val();"PPH"==i?($("#pago_efectivo").hide(),$("#placetopay").hide(),$("#payphone").show()):("PTP"==i?($("#pago_efectivo").hide(),$("#placetopay").show()):("PEF"==i?$("#pago_efectivo").show():$("#pago_efectivo").hide(),$("#placetopay").hide()),$("#payphone").hide())}return r<a||!(3===r&&Number($("#age-2").val())<18)&&(a<r&&(form.find(".body:eq("+r+") label.error").remove(),form.find(".body:eq("+r+") .error").removeClass("error")),form.validate().settings.ignore=":disabled,:hidden",form.valid())},onFinishing:function(e,a){return form.validate().settings.ignore=":disabled",form.valid()},onFinished:function(e,a){var r=$("#method_pay").val();$('a[href="#finish"]').attr("href","javascript:void();"),$('a[href="#previous"]').attr("href","javascript:void(0);"),$("#Cargando").html('<div class="text-center"><img src="https://affinity.compraneta.com/static/affinity/assets/images/loader.gif" alt="Cargando"/><br/>Un momento, por favor...</div>'),$("#back_botton").hide();var i=$("input[name=full_name]").val(),n=$("input[name=first_name]").val(),t=$("input[name=last_name]").val(),o=$("input[name=email]").val(),s=$("input[name=address]").val(),l=$("input[name=address_2]").val(),c=$("input[name=instructions]").val(),d=$("input[name=phone]").val(),m=($("input[name=type_id]").val(),$("#type_id_").val()),p=$("input[name=identification]").val(),u=$("input[name=city]").val(),h=$("input[name=state_province]").val(),f=$("input[name=postal_code]").val(),g=($("input[name=country]").val(),$("#country_id").val()),v=$("input[name=compania]").val();console.log(g),$.ajax({type:"POST",url:"/compraneta/updated_data/",data:{full_name:i,first_name:n,last_name:t,email:o,address:s,address_2:l,instructions:c,phone:d,type_id:m,identification:p,city:u,state_province:h,postal_code:f,country:g,compania:v},success:function(e){console.log(e)},error:function(e){console.log(e)}}),"PEF"==r?$.ajax({type:"POST",url:"/compraneta/send_pagoefectivo/",success:function(e){console.log(e),$("#back_information").html(""),$("#back_botton").hide(),e[0].isError?(Swal.fire({type:"warning",text:""+e[0].description}),$("#Cargando").html(""),$('a[href="javascript:void();"]').attr("href","#finish"),$("#back_botton").hide()):($("#Cargando").html(""),$("#confirmID").removeAttr("disabled"),$("#back_information").html("<iframe src='"+e[0].urlToken+e[0].token+"' style='width: 100%; height: 20rem;'></iframe>"),$("#back_botton").show())},error:function(e){console.log(e),$("#Cargando").html(""),$('a[href="javascript:void();"]').attr("href","#finish"),$("#back_botton").hide(),$("#back_information").html(""),Swal.fire({type:"error",title:"Oops...",text:"¡Algo salió mal!"})}}):"PPH"==r?prepare_payphone():"PTP"==r?$.ajax({type:"POST",url:"/compraneta/send_placetopay_front/",success:function(e){console.log(e),e[0].isError?(Swal.fire({type:"warning",text:""+e[0].description}),$("#Cargando").html(""),$('a[href="javascript:void();"]').attr("href","#finish"),$("#back_botton").hide()):(P.on("response",function(e){var a=JSON.stringify(e,null,2);console.log(a),$.ajax({type:"POST",url:"/compraneta/placetopay_response_front/",data:{respuestaJson:a},success:function(e){console.log(e),e[0].isError?(Swal.fire({type:"warning",text:""+e[0].description}),$("#Cargando").html(""),$('a[href="javascript:void();"]').attr("href","#finish"),$("#back_botton").hide()):(Swal.fire({type:"success",text:""+e[0].description}),$("#confirmID").removeAttr("disabled"),$("#Cargando").html(""),$("#back_botton").show())},error:function(e){console.log(e),Swal.fire({type:"error",title:"Oops...",text:"¡Algo salió mal!"}),$("#Cargando").html(""),$('a[href="javascript:void();"]').attr("href","#finish"),$("#back_botton").hide()}})}),processUrl=e[0].processUrl,P.init(processUrl,{opacity:.4}))},error:function(e){console.log(e),$("#Cargando").html(""),$('a[href="javascript:void();"]').attr("href","#finish"),$("#back_botton").hide(),Swal.fire({type:"error",title:"Oops...",text:"¡Algo salió mal!"})}}):(Swal.fire({type:"info",title:"Opci&oacute;n Invalida",text:"La opci&oacute;n seleccionada no existe o es invalida."}),$("#Cargando").html(""),$("#back_botton").hide(),$("#back_information").html(""),$('a[href="javascript:void();"]').attr("href","#finish"),$('a[href="javascript:void(0);"]').attr("href","#previous"))}}),$(".validation-wizard").validate({ignore:"input[type=hidden]",errorClass:"text-danger",successClass:"text-success",highlight:function(e,a){$(e).removeClass(a)},unhighlight:function(e,a){$(e).removeClass(a)},errorPlacement:function(e,a){e.insertAfter(a)},rules:{full_name:{required:!0,minlength:2,maxlength:25},first_name:{required:!0,minlength:2,maxlength:25},last_name:{required:!0,minlength:2,maxlength:25},email:{required:!0,email:!0},address:{required:!0,minlength:6,maxlength:50},instructions:{required:!0,minlength:6,maxlength:50},phone:{required:!0,minlength:10,maxlength:10,number:!0},type_id:{required:!0},identification:{required:!0,minlength:5,maxlength:15},city:{required:!0,minlength:3},state_province:{required:!0,minlength:3},postal_code:{required:!0,minlength:3},country:{required:!0},method:{required:!0}},messages:{full_name:{required:"Por favor ingrese un nombre de la persona que va ha recibir el/los productos.",minlength:"Su nombre debe constar de al menos 2 caracteres.",maxlength:"Su nombre debe poseer maximo 25 caracteres."},first_name:{required:"Por favor ingrese sus nombres.",minlength:"Sus nombres debe constar de al menos 2 caracteres.",maxlength:"Sus nombres debe poseer maximo 25 caracteres."},last_name:{required:"Por favor ingrese sus apellidos.",minlength:"Sus apellidos debe constar de al menos 2 caracteres.",maxlength:"Sus apellidos debe poseer maximo 25 caracteres."},email:"Por favor, introduce una dirección de correo electrónico válida",address:{required:"Por favor ingrese su dirección.",minlength:"Su direccion debe constar de al menos 6 caracteres.",maxlength:"Su direccion debe poseer maximo 50 caracteres."},instructions:{required:"Por favor ingrese su referencia para llegar a su domicilio.",minlength:"Su referencia debe constar de al menos 6 caracteres.",maxlength:"Su referencia debe poseer maximo 50 caracteres."},phone:{required:"Por favor proporcione un celular.",minlength:"Su numero celular debe tener al menos 10 caracteres.",maxlength:"Su numero celular no debe sobrepasar de los 10 caracteres."},type_id:"Por favor, elije un tipo de identificación.",identification:{required:"Por favor ingrese su identificación.",minlength:"Su identificación debe constar de al menos 5 caracteres.",maxlength:"Su identificación debe poseer maximo 15 caracteres."},city:{required:"Por favor ingrese una ciudad.",minlength:"Su ciudad debe constar de al menos 3 caracteres."},state_province:{required:"Por favor ingrese su estado/provincia/región.",minlength:"Su estado/provincia/región debe constar de al menos 3 caracteres."},postal_code:{required:"Por favor ingrese el código postal.",minlength:"Su código postal debe constar de al menos 3 caracteres."},country:"Por favor, elije tu pais de residencia.",method:"Por favor, elije un metodo de pago valido."}});